<%- include("partials/header", { title: "Orders", subtitle: "Tap an order to open", key, active: (status==='DRAFT'?'draft':(status==='APPROVED'?'approved':'draft')) }) %>

<div class="grid">
  <div class="card">
    <h2>Status filter</h2>
    <div class="chips">
      <a class="chip <%= status==='DRAFT' ? 'ok' : '' %>" href="/admin/orders?status=DRAFT&key=<%= key %>">DRAFT</a>
      <a class="chip <%= status==='APPROVED' ? 'ok' : '' %>" href="/admin/orders?status=APPROVED&key=<%= key %>">APPROVED</a>
      <a class="chip <%= status==='DELIVERED' ? 'ok' : '' %>" href="/admin/orders?status=DELIVERED&key=<%= key %>">DELIVERED</a>
      <a class="chip <%= status==='REJECTED' ? 'ok' : '' %>" href="/admin/orders?status=REJECTED&key=<%= key %>">REJECTED</a>
    </div>
  </div>

  <div class="card">
    <h2>Orders (<%= status %>)</h2>

    <% if (!orders || orders.length === 0) { %>
      <div class="chip">No orders in this status</div>
    <% } %>

    <div class="list">
      <% (orders || []).forEach(o => { %>
        <a class="order" href="/admin/orders/<%= o.id %>?key=<%= key %>">
          <div>
            <strong>#<%= o.id %> • <%= o.phone %></strong><br/>
            <small><%= o.qty %> <%= o.unit_label %> • <%= o.delivery_day %> • <%= o.payment_status %></small>
          </div>
          <div class="money">₹<%= o.total %></div>
        </a>
      <% }) %>
    </div>
  </div>
</div>

<%- include("partials/footer", { key, active: (status==='APPROVED'?'approved':'draft') }) %>
